#config_version=5
mode:
    start_events: ball_starting
    priority: 100

shot_profiles:
    flashjackpot:
        states:
          - name: lit
            show: "flash"

#Shots
shots:
  spinner:
    switch: s_spinner
  captiveball:
    switch: s_captiveball
  world_jackpot:
    switch: s_centertarget
    profile: flashjackpot
    show_tokens:
      leds: l_worldtarget
    enable_events: world_jackpot_enable
    disable_events: world_jackpot_disable
  collectitem1:
    switch: s_collectitem1
    show_tokens:
      leds: l_collectitem1
    enable_events: collectitem1_enabled
    disable_events: collectitem1_disabled
  collectitem2:
    switch: s_collectitem2
    show_tokens:
      leds: l_collectitem2
    enable_events: collectitem2_enabled
    disable_events: collectitem2_disabled
  collectitem_special:
    switch: s_collectitem3
    show_tokens:
      leds: l_collectitem3
    enable_events: collectitem_special_enabled
    disable_events: collectitem_special_disabled
  collectitem3:
    switch: s_collectitem4
    show_tokens:
      leds: l_collectitem4
    enable_events: collectitem3_enabled
    disable_events: collectitem3_disabled
  collectitem4:
    switch: s_collectitem5
    show_tokens:
      leds: l_collectitem5
    enable_events: collectitem4_enabled
    disable_events: collectitem4_disabled

event_player:
  #BALL STARTING EVENTS
  ball_started:
    item_collected
    recalculate_worldjackpot

  collectitem1_hit:
    item_collected
  collectitem2_hit:
    item_collected
  collectitem4_hit:
    item_collected
  collectitem5_hit:
    item_collected

  #ENABLE VILLAGER MULTIBALL 
  logicblock_counter_villagermultiball_complete:
    villagermultiball_ready

  #RECALCULATE WORLD JACKPOT
  player_world_jackpot_base:
    recalculate_worldjackpot
  player_worlds_items:
    recalculate_worldjackpot
  player_worlds_traveled:
    recalculate_worldjackpot
  player_multiplier_mb:
    recalculate_worldjackpot
  world_jackpot_hit:
    recalculate_worldjackpot
  recalculate_worldjackpot{current_player.world_jackpot < 100000}:
    world_jackpot_disable
  recalculate_worldjackpot{current_player.world_jackpot > 100000}:
    world_jackpot_enable
   
  #START VILLAGER MULTIBALL ON PLUNGE
  sw_playfield_active_active{device.multiball_locks.villagerlock.locked_balls==1 and device.multiball_locks.villagerlock.enabled}:
    villagermultiball_start
  #START NIGHT MULTIBALL ON PLUNGE
  sw_playfield_active_active{device.multiball_locks.nightlock.locked_balls==1 and device.multiball_locks.nightlock.enabled}:
    nightmode_start

  #COMPLETE WORLDS WHEN NIGHT MODE STARTS
  multiball_nightmb_started{current_player.world_id==1}:
    world1_completed
  multiball_nightmb_started{current_player.world_id==2}:
    world2_completed
  multiball_nightmb_started{current_player.world_id==3}:
    world3_completed
  multiball_nightmb_started{current_player.world_id==4}:
    world4_completed
  multiball_nightmb_started{current_player.world_id==5}:
    world5_completed

  #=========== CONTROLS WHEN WORLDS ARE STARTED ============
  #START WORLD 1
  mode_base_started{current_player.world_id==0}:
    world1_start

  #ENABLE NEXT WORLDS WHEN NIGHT MODE RETURNS
  multiball_nightmb_ended{current_player.world_id==1}:
    world2_start
  multiball_nightmb_ended{current_player.world_id==2}:
    world3_start
  multiball_nightmb_ended{current_player.world_id==3}:
    world4_start
  multiball_nightmb_ended{current_player.world_id==4}:
    world5_start
  multiball_nightmb_ended{current_player.world_id==5}:
    world6_start

  world1_collected{current_player.multiplier_mb==1}:
    nightmode_ready
    villagermb_disable
  world2_collected{current_player.multiplier_mb==1}:
    nightmode_ready
    villagermb_disable
  world3_collected{current_player.multiplier_mb==1}:
    nightmode_ready
    villagermb_disable
  world4_collected{current_player.multiplier_mb==1}:
    nightmode_ready
    villagermb_disable
  world5_collected{current_player.multiplier_mb==1}:
    nightmode_ready
    villagermb_disable

  multiball_villagermb_ended{current_player.world_item1_remaining == 0 and current_player.world_item2_remaining == 0 and current_player.world_item3_remaining == 0 and current_player.world_item4_remaining == 0}:
    nightmode_ready
    villagermb_disable

counters:
   counter_villagermultiball:
      count_events: spinner_hit
      starting_count: 0
      count_interval: 1
      count_complete_value: 20
      restart_events: multiball_nightmb_ended,multiball_villagermb_ended, ball_started
      disable_events: villagermb_disable
      enable_events: ball_started
      persist_state: true

multiball_locks:
   villagerlock:
     balls_to_lock: 1
     locked_ball_counting_strategy: physical_only
     lock_devices: bd_topkicker 
     enable_events: villagermultiball_ready
     disable_events: villagermultiball_start, villagermb_disable
   nightlock:
     balls_to_lock: 1
     locked_ball_counting_strategy: physical_only
     lock_devices: bd_scoop 
     enable_events: nightmode_ready
     disable_events: nightmode_start, nightmode_disable

multiballs:
   villagermb:
     ball_count: 2
     ball_locks: bd_topkicker
     enable_events: villagermultiball_ready
     start_events: villagermultiball_start
     shoot_again: 0s
   nightmb:
     ball_count: 2
     ball_locks: bd_scoop
     enable_events: nightmode_ready
     start_events: nightmode_start
     shoot_again: 0s

#Player Variables
variable_player:
  #MULTIBALL MULTIPLIER
  ball_started:     #RESET ON BALL START
    multiplier_mb:  #RESET MULTIBALL MULTIPLIER TO NONE
      int: 1
      action: set
    bonus_items:  #RESET BONUS COUNT ON END OF EACH BALL
      int: 0
      action: set
    world_jackpot_worlds:  #RESET WORLDS TRAVELED
      int: 1
      action: set
    world_jackpot_base:  #RESET WORLD JACKPOT BASE
      int: 10000
      action: set
    world_jackpot_items:  #RESET WORLD JACKPOT ITEMS
      int: 0
      action: set
  multiball_villagermb_started: #VILLAGER MULTIBALL STARTED
    multiplier_mb:
      int: 2
      action: set
  multiball_villagermb_ended: #VILLAGER MULTIBALL ENDED
    multiplier_mb:
      int: 1
      action: set
  multiball_nightmb_started: #NIGHT MULTIBALL STARTED
    multiplier_mb:
      int: 2
      action: set
  multiball_nightmb_ended: #VILLAGER MULTIBALL ENDED
    world_jackpot_worlds: 1  #FOR WORLD JACKPOT / INCREASE WORLDS TRAVELED
    multiplier_mb:
      int: 1
      action: set

  #WORLD JACKPOT
  recalculate_worldjackpot:
    world_jackpot:
      int: current_player.world_jackpot_base * current_player.world_jackpot_items * current_player.world_jackpot_worlds * current_player.multiplier_mb
      action: set

  world_jackpot_hit:
    score: current_player.world_jackpot
    world_jackpot_base:
      int: 10000
      action: set
    world_jackpot_worlds:
      int: 1
      action: set
    world_jackpot_items:
      int: 1
      action: set


  #SPINNER SCORING
  spinner_hit{device.counters.counter_villagermultiball.value<4}: #LEVEL 100
    score: 100 * current_player.multiplier_mb
    world_jackpot_base: 1000
  spinner_hit{device.counters.counter_villagermultiball.value>=4 and device.counters.counter_villagermultiball.value<8}: #LEVEL 1000
    score: 1000 * current_player.multiplier_mb
    world_jackpot_base: 1000
  spinner_hit{device.counters.counter_villagermultiball.value>=8 and device.counters.counter_villagermultiball.value<12}: #LEVEL 2000
    score: 2000 * current_player.multiplier_mb
    world_jackpot_base: 1000
  spinner_hit{device.counters.counter_villagermultiball.value>=12 and device.counters.counter_villagermultiball.value<16}: #LEVEL 3000
    score: 3000 * current_player.multiplier_mb
    world_jackpot_base: 1000
  spinner_hit{device.counters.counter_villagermultiball.value>=16}: #LEVEL 4000
    score: 4000 * current_player.multiplier_mb
    world_jackpot_base: 1000

  collectitem1_hit:
    score: 10000 * current_player.multiplier_mb
    bonus_items: 1
    world_jackpot_items: 1
    world_jackpot_base: 1000
  collectitem2_hit:
    score: 10000 * current_player.multiplier_mb
    bonus_items: 1
    world_jackpot_items: 1
    world_jackpot_base: 1000
  collectitem3_hit:
    score: 10000 * current_player.multiplier_mb
    world_jackpot_base: 1000
  collectitem4_hit:
    score: 10000 * current_player.multiplier_mb
    bonus_items: 1
    world_jackpot_items: 1
    world_jackpot_base: 1000
  collectitem5_hit:
    score: 10000 * current_player.multiplier_mb
    bonus_items: 1
    world_jackpot_items: 1
    world_jackpot_base: 1000

  s_right_outlane_active:
    score: 5000 * current_player.multiplier_mb
  #s_centertarget_active:
  #  score: 10000 * current_player.multiplier_mb
  s_rightsling_active:
    score: 100 * current_player.multiplier_mb
  s_leftsling_active:
    score: 100 * current_player.multiplier_mb
  s_bumperrail_active:
    score: 50 * current_player.multiplier_mb
  s_scoup_active:
    score: 5000 * current_player.multiplier_mb
 
  s_topkicker_active:
    score: 5000 * current_player.multiplier_mb
  s_whitedot1_active:
    score: 100 * current_player.multiplier_mb
  s_whitedot2_active:
    score: 100 * current_player.multiplier_mb
  s_whitedot3_active:
    score: 100 * current_player.multiplier_mb
  s_whitedot4_active:
    score: 100 * current_player.multiplier_mb
  s_bluetarget1_active:
    score: 5000 * current_player.multiplier_mb
  s_bluetarget2_active:
    score: 5000 * current_player.multiplier_mb
  s_bluetarget3_active:
    score: 5000 * current_player.multiplier_mb
  #s_collectitem1_active:
  #  score: 1000 * current_player.multiplier_mb
  #s_collectitem2_active:
  #  score: 1000 * current_player.multiplier_mb
  #s_collectitem3_active:
  #  score: 5000 * current_player.multiplier_mb
  #s_collectitem4_active:
  #  score: 1000 * current_player.multiplier_mb
  #s_collectitem5_active:
  #  score: 1000 * current_player.multiplier_mb
  s_collect_active:
    score: 1000 * current_player.multiplier_mb

sound_player:
  world_jackpot_hit: world_jackpot
  collectitem1_hit: collect_tool
  collectitem2_hit: collect_tool
  collectitem3_hit: collect_tool
  collectitem4_hit: collect_tool
  collectitem5_hit: collect_tool
  s_rightinlane_active: lane_swish
  s_rightoutlane_active: lane_swish
  s_leftinlane_active: lane_swish
  s_leftoutlane_active: lane_swish
  s_spinner_active: 
    villagersp: 
      action: play
      loops: 1
  #VILLAGER MULTIBALL
  villagermultiball_ready:
    villager_multiball_ready
      
show_player:
  mode_base_started:
    show_dropcreepers:  #Drop the Creepers
      loops: 0
      speed: 1
  multiball_nightmb_ended:
    show_dropcreepers:  #Drop the Creepers
      loops: 0
      speed: 1
      
light_player:
  mode_base_started:
    lgi:
      color: white
    lfeature: off
  spinner_hit{device.counters.counter_villagermultiball.value>=4 and device.counters.counter_villagermultiball.value<8}: #LEVEL 1000
    l_spinner1: green
    l_spinner2: off
    l_spinner3: off
    l_spinner4: off
  spinner_hit{device.counters.counter_villagermultiball.value>=8 and device.counters.counter_villagermultiball.value<12}: #LEVEL 1000
    l_spinner1: off
    l_spinner2: green
    l_spinner3: off
    l_spinner4: off
  spinner_hit{device.counters.counter_villagermultiball.value>=12 and device.counters.counter_villagermultiball.value<16}: #LEVEL 1000
    l_spinner1: off
    l_spinner2: off
    l_spinner3: green
    l_spinner4: off
  spinner_hit{device.counters.counter_villagermultiball.value>=16}:
    l_spinner3: off 
    l_spinner2: off 
    l_spinner1: off
    l_spinner4: green 
  multiball_villagermb_started:
    l_spinner1: green
    l_spinner2: green
    l_spinner3: green
    l_spinner4: green
  multiball_villagermb_ended:
    l_spinner1: off
    l_spinner2: off
    l_spinner3: off
    l_spinner4: off

#This is for achieving the worlds
achievements:
  world1:
    show_tokens:
      light: l_world1
      color: green
    show_when_selected: show_flashcolor 
    show_when_started: show_fadecolor
    show_when_completed: show_solidcolor 
    events_when_started: world1_started
    reset_events: reset_worlds
    enable_events: world1_start
    complete_events: world1_completed
    events_when_completed: rotate_mission_rotator
    restart_on_next_ball_when_started: true
    enable_on_next_ball_when_enabled: true
  world2:
    show_tokens:
      light: l_world2
      color: yellow
    show_when_selected: show_flashcolor 
    show_when_started: show_fadecolor
    show_when_completed: show_solidcolor 
    events_when_started: world2_started
    reset_events: reset_worlds
    enable_events: world2_start
    complete_events: world2_completed
    events_when_completed: rotate_mission_rotator
    restart_on_next_ball_when_started: true
    enable_on_next_ball_when_enabled: true
  world3:
    show_tokens:
      light: l_world3
      color: blue
    show_when_selected: show_flashcolor 
    show_when_started: show_fadecolor
    show_when_completed: show_solidcolor 
    events_when_started: world3_started
    reset_events: reset_worlds
    enable_events: world3_start
    complete_events: world3_completed
    events_when_completed: rotate_mission_rotator
    restart_on_next_ball_when_started: true
    enable_on_next_ball_when_enabled: true
  world4:
    show_tokens:
      light: l_world4
      color: brown
    show_when_selected: show_flashcolor 
    show_when_started: show_fadecolor
    show_when_completed: show_solidcolor 
    events_when_started: world4_started
    reset_events: reset_worlds
    enable_events: world4_start
    complete_events: world4_completed
    events_when_completed: rotate_mission_rotator
    restart_on_next_ball_when_started: true
    enable_on_next_ball_when_enabled: true
  world5:
    show_tokens:
      light: l_world5
      color: red
    show_when_selected: show_flashcolor 
    show_when_started: show_fadecolor
    show_when_completed: show_solidcolor 
    events_when_started: world5_started
    reset_events: reset_worlds
    enable_events: world5_start
    complete_events: world5_completed
    events_when_completed: rotate_mission_rotator
    restart_on_next_ball_when_started: true
    enable_on_next_ball_when_enabled: true
  world6:
    show_tokens:
      light: l_world6
      color: purple
    show_when_selected: show_flashcolor 
    show_when_started: show_fadecolor
    show_when_completed: show_solidcolor 
    events_when_started: world6_started
    reset_events: reset_worlds
    enable_events: world6_start
    complete_events: world6_completed
    events_when_completed: rotate_mission_rotator
    restart_on_next_ball_when_started: true
    enable_on_next_ball_when_enabled: true

achievement_groups:
  worlds:
    achievements: world1, world2, world3, world4, world5, world6
    start_selected_events: world_start, world1_start, world2_start, world3_start, world4_start, world5_start, world6_start
    events_when_enabled: mission_rotator_ready
    auto_select: true
    enable_while_no_achievement_started: true
    rotate_right_events: rotate_mission_rotator


slides:
  base_pincraft_slide:
    priority: 100
    widgets:
      - type: text        #VILLAGER JACKPOT
        text: Villager Jackpot - (player|villager_jackpot)
        number_grouping: true
        min_digits: 2
        font_name: ARLRDBD
        font_size: 25
        y: top-50
        x: left+100
        z: 100
        anchor_x: left
        anchor_y: top
      - type: text        #WORLD JACKPOT
        text: World Jackpot - (player|world_jackpot_base) x Items (player|world_jackpot_items) x Traveled (player|world_jackpot_worlds) x MB (player|multiplier_mb) = (player|world_jackpot)
        number_grouping: true
        min_digits: 2
        font_name: ARLRDBD
        font_size: 25
        y: top-100
        x: left+100
        z: 100
        anchor_x: left
        anchor_y: top
      - type: text        #MULTIBALL MULTIPLIER
        text: MB - (player|multiplier_mb)x
        number_grouping: true
        min_digits: 2
        font_name: ARLRDBD
        font_size: 25
        y: top-50
        x: right-100
        z: 100
        anchor_x: left
        anchor_y: top
      - type: text        #PLAYER 1 SCORE
        text: PLAYER 1 - (player1|score)
        number_grouping: true
        min_digits: 2
        font_name: ARLRDBD
        font_size: 25
        y: bottom+260
        x: left+50
        z: 100
        anchor_x: left
        anchor_y: top
      - type: text        #PLAYER 2 SCORE
        text: PLAYER 2 - (player2|score)
        number_grouping: true
        min_digits: 2
        font_name: ARLRDBD
        font_size: 25
        y: bottom+200
        x: left+50
        z: 100
        anchor_x: left
        anchor_y: top
      - type: text        #PLAYER 3 SCORE
        text: PLAYER 3 - (player3|score)
        number_grouping: true
        min_digits: 2
        font_name: ARLRDBD
        font_size: 25
        y: bottom+140
        x: left+50
        z: 100
        anchor_x: left
        anchor_y: top
      - type: text        #PLAYER 4 SCORE
        text: PLAYER 4 - (player4|score)
        number_grouping: true
        min_digits: 2
        font_name: ARLRDBD
        font_size: 25
        y: bottom+80
        x: left+50
        z: 100
        anchor_x: left
        anchor_y: top
      - type: text        #TOOL 1 MULTIPLIER
        text: 1x
        font_name: ARLRDBD
        font_size: 25
        y: top-188
        x: right-60
        z: 100
        anchor_x: center
        anchor_y: top
      - type: text        #TOOL 2 MULTIPLIER
        text: 1x
        font_name: ARLRDBD
        font_size: 25
        y: top-302
        x: right-60
        z: 100
        anchor_x: center
        anchor_y: top
      - type: text        #TOOL 3 MULTIPLIER
        text: 1x
        font_name: ARLRDBD
        font_size: 25
        y: top-416
        x: right-60
        z: 100
        anchor_x: center
        anchor_y: top
      - type: text        #TOOL 3 MULTIPLIER
        text: 1x
        font_name: ARLRDBD
        font_size: 25
        y: top-530
        x: right-60
        z: 100
        anchor_x: center
        anchor_y: top
      - type: text        #ITEM 1 NEEDED
        text: (player|world_item1_remaining)
        font_name: ARLRDBD
        font_size: 25
        y: bottom+24
        x: right-462
        z: 100
        anchor_x: center
        anchor_y: bottom
      - type: text        #ITEM 2 NEEDED
        text: (player|world_item2_remaining)
        font_name: ARLRDBD
        font_size: 25
        y: bottom+24
        x: right-373
        z: 100
        anchor_x: center
        anchor_y: bottom
      - type: text        #ITEM 3 NEEDED
        text: (player|world_item3_remaining)
        font_name: ARLRDBD
        font_size: 25
        y: bottom+24
        x: right-284
        z: 100
        anchor_x: center
        anchor_y: bottom
      - type: text        #ITEM 4 NEEDED
        text: (player|world_item4_remaining)
        font_name: ARLRDBD
        font_size: 25
        y: bottom+24
        x: right-196
        z: 100
        anchor_x: center
        anchor_y: bottom
      - type: text        #BALL TEXT
        text: BALL (ball)
        font_name: ARLRDBD
        font_size: 25
        y: bottom+50
        x: right-60
        z: 100
        anchor_x: center
        anchor_y: bottom
      - type: image        #BALL1
        image: heart_empty
        anchor_x: right
        anchor_y: bottom
        y: bottom+15
        x: right-15
        z: 10
      - type: image        #BALL2
        image: heart_full
        anchor_x: right
        anchor_y: bottom
        y: bottom+15
        x: right-45 
        z: 10
      - type: image        #BALL3
        image: heart_full
        anchor_x: right
        anchor_y: bottom
        y: bottom+15
        x: right-75 
        z: 10
      - type: image        #TOOL BACKGROUND
        image: tool_background
        anchor_x: right
        anchor_y: bottom
        y: bottom+200
        x: right-15
        z: 10
      - type: image        #ITEM BACKGROUND
        image: item_background
        anchor_x: left
        anchor_y: bottom
        y: bottom+15
        x: left+860
        z: 10
      - type: image        #SCORE BACKGROUND
        image: score_background
        anchor_x: left
        anchor_y: bottom
        y: bottom+15
        x: left+15
        z: 10
      - type: image        #WORLD BACKGROUND
        image: world1_background
        z: 0

slide_player:
  mode_base_started: base_pincraft_slide

